# LAMMPS input script for BCC W wich crack to relax at finite temperature 
# input variance: temperature T, crack system index idx, now_step
units 		metal
atom_style	atomic
dimension	3
boundary	p p p  

read_data 	${potential}/dump/${idx}/$T/W_${idx}_$T_${now_step}.lmp

pair_style  eam/alloy
pair_coeff  * * ${potential}/p_func/${p_name} W W W W
 
group 		upper type 2 
group 		lower type 3
neigh_modify 	exclude group upper lower   # delete the interaction between free surface 

group		bd type 4
group		mobile subtract all bd

# ------------ relax at finite temperature --------------
compute     myTemp mobile temp
compute     pemb mobile pe/atom
compute     pe all reduce sum c_pemb
thermo		100
thermo_style    custom step temp etotal pe c_pe pzz
thermo_modify   temp myTemp

velocity    bd set 0.0 0.0 0.0
fix		1 bd setforce 0.0 0.0 0.0

fix		bd_nve bd nve
fix		mb_nvt mobile nvt temp $T $T $(100*dt)
fix_modify  mb_nvt temp myTemp

run		15000

# write_data	dump/${idx}/$T/W_${idx}_$T_${now_step}_eq.data 
write_dump  all custom ${potential}/dump/${idx}/$T/W_${idx}_$T_${now_step}_eq.data id type mass x y z vx vy vz modify sort id
